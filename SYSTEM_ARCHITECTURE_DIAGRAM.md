# Metatech CRM - System Architecture & Implementation Diagram

## ğŸ“Š Complete System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         METATECH CRM SAAS PLATFORM                          â”‚
â”‚                      Multi-Tenant Subdomain Architecture                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SUBDOMAIN ROUTING                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ admincrm.localhost â”‚  â”‚  crm.localhost       â”‚  â”‚ {client}.localhostâ”‚ â”‚
â”‚  â”‚ admincrm.metatech. â”‚  â”‚  crm.metatech.ae     â”‚  â”‚ {client}.crm.     â”‚ â”‚
â”‚  â”‚ ae                 â”‚  â”‚                      â”‚  â”‚ metatech.ae       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                        â”‚                          â”‚             â”‚
â”‚           â”‚                        â”‚                          â”‚             â”‚
â”‚    Product Owner           Internal Employee          Company Super Admin   â”‚
â”‚                           (Metatech Employees)        (Client Companies)    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER TYPES & ROLES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. PRODUCT OWNER (System Super Admin)                                     â”‚
â”‚     â”œâ”€ Role: super_admin                                                   â”‚
â”‚     â”œâ”€ company_name: NULL                                                  â”‚
â”‚     â”œâ”€ subdomain: NULL                                                     â”‚
â”‚     â”œâ”€ is_metatech_employee: false                                         â”‚
â”‚     â””â”€ Access: admincrm.localhost:8000                                     â”‚
â”‚                                                                             â”‚
â”‚  2. INTERNAL EMPLOYEE (Metatech Staff)                                     â”‚
â”‚     â”œâ”€ Role: admin/user                                                    â”‚
â”‚     â”œâ”€ company_name: NULL                                                  â”‚
â”‚     â”œâ”€ subdomain: NULL                                                     â”‚
â”‚     â”œâ”€ is_metatech_employee: true                                          â”‚
â”‚     â””â”€ Access: crm.localhost:8000                                          â”‚
â”‚                                                                             â”‚
â”‚  3. COMPANY SUPER ADMIN (Client Owner)                                     â”‚
â”‚     â”œâ”€ Role: super_admin                                                   â”‚
â”‚     â”œâ”€ company_name: "Company Name"                                        â”‚
â”‚     â”œâ”€ subdomain: "company-subdomain"                                      â”‚
â”‚     â”œâ”€ is_metatech_employee: false                                         â”‚
â”‚     â””â”€ Access: {subdomain}.localhost:8000                                  â”‚
â”‚                                                                             â”‚
â”‚  4. STAFF MEMBER (Company Staff)                                           â”‚
â”‚     â”œâ”€ Role: admin/project_manager/user                                    â”‚
â”‚     â”œâ”€ company_name: "Company Name"                                        â”‚
â”‚     â”œâ”€ subdomain: "company-subdomain"                                      â”‚
â”‚     â”œâ”€ is_metatech_employee: false                                         â”‚
â”‚     â””â”€ Access: {subdomain}.localhost:8000                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DASHBOARDS & ROUTES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PRODUCT OWNER DASHBOARD                    INTERNAL DASHBOARD              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ /dashboard             â”‚                â”‚ /internal/dashboard    â”‚      â”‚
â”‚  â”‚ admincrm.localhost     â”‚                â”‚ crm.localhost          â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ âœ“ Company Management   â”‚                â”‚ âœ“ Employee Dashboard  â”‚      â”‚
â”‚  â”‚ âœ“ Create Companies     â”‚                â”‚ âœ“ System Status       â”‚      â”‚
â”‚  â”‚ âœ“ Block/Unblock        â”‚                â”‚ âœ“ Quick Actions       â”‚      â”‚
â”‚  â”‚ âœ“ User Management      â”‚                â”‚                        â”‚      â”‚
â”‚  â”‚ âœ“ Internal Employees   â”‚                â”‚                        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                             â”‚
â”‚  COMPANY DASHBOARD                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚ /company-dashboard     â”‚                                                â”‚
â”‚  â”‚ {subdomain}.localhost  â”‚                                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                â”‚
â”‚  â”‚ âœ“ Projects Management  â”‚                                                â”‚
â”‚  â”‚ âœ“ Staff Invitations    â”‚                                                â”‚
â”‚  â”‚ âœ“ Team Members         â”‚                                                â”‚
â”‚  â”‚ âœ“ Project Access       â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      IMPLEMENTED FEATURES (PHASES)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âœ… PHASE 1: BLOCK/UNBLOCK SYSTEM                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ User Status Management (active, blocked, suspended)            â”‚     â”‚
â”‚  â”‚ â€¢ Company Status Management                                       â”‚     â”‚
â”‚  â”‚ â€¢ Status Reasons & Audit Trail                                    â”‚     â”‚
â”‚  â”‚ â€¢ API Endpoints:                                                  â”‚     â”‚
â”‚  â”‚   - POST /api/v1/user-management/users/{id}/block                â”‚     â”‚
â”‚  â”‚   - POST /api/v1/user-management/users/{id}/unblock              â”‚     â”‚
â”‚  â”‚   - POST /api/v1/user-management/companies/{id}/block            â”‚     â”‚
â”‚  â”‚   - POST /api/v1/user-management/companies/{id}/unblock          â”‚     â”‚
â”‚  â”‚ â€¢ Middleware: CheckUserStatus                                     â”‚     â”‚
â”‚  â”‚ â€¢ UI: Block/Unblock buttons in Product Owner Dashboard           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  âœ… PHASE 2: ROLE-BASED ACCESS CONTROL                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ Spatie Laravel Permission Package                               â”‚     â”‚
â”‚  â”‚ â€¢ Roles: super_admin, admin, project_manager, user               â”‚     â”‚
â”‚  â”‚ â€¢ Permissions System                                              â”‚     â”‚
â”‚  â”‚ â€¢ Middleware: CheckRole                                            â”‚     â”‚
â”‚  â”‚ â€¢ Role assignment on user creation                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  âœ… PHASE 3: STAFF INVITATION SYSTEM                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ Staff Invitations Table                                         â”‚     â”‚
â”‚  â”‚ â€¢ Email Invitations with Tokens                                   â”‚     â”‚
â”‚  â”‚ â€¢ Invitation Acceptance Page                                      â”‚     â”‚
â”‚  â”‚ â€¢ API Endpoints:                                                  â”‚     â”‚
â”‚  â”‚   - POST /api/v1/staff/invite                                     â”‚     â”‚
â”‚  â”‚   - GET  /api/v1/staff/invitations                                â”‚     â”‚
â”‚  â”‚   - POST /api/v1/staff/invitations/{token}/accept                 â”‚     â”‚
â”‚  â”‚   - DELETE /api/v1/staff/invitations/{id}                         â”‚     â”‚
â”‚  â”‚ â€¢ Email Template: staff-invitation.blade.php                      â”‚     â”‚
â”‚  â”‚ â€¢ Web Routes: /accept-invitation/{token}                          â”‚     â”‚
â”‚  â”‚ â€¢ UI: Staff Invitations section in Company Dashboard              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  âœ… PHASE 4: PROJECT-BASED ACCESS CONTROL                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ Projects Table                                                  â”‚     â”‚
â”‚  â”‚ â€¢ Project-User Pivot Table (access levels)                       â”‚     â”‚
â”‚  â”‚ â€¢ Access Levels: viewer, editor, admin                           â”‚     â”‚
â”‚  â”‚ â€¢ API Endpoints:                                                  â”‚     â”‚
â”‚  â”‚   - GET    /api/v1/projects                                       â”‚     â”‚
â”‚  â”‚   - POST   /api/v1/projects                                       â”‚     â”‚
â”‚  â”‚   - GET    /api/v1/projects/{id}                                  â”‚     â”‚
â”‚  â”‚   - PUT    /api/v1/projects/{id}                                  â”‚     â”‚
â”‚  â”‚   - POST   /api/v1/projects/{id}/grant-access                     â”‚     â”‚
â”‚  â”‚   - DELETE /api/v1/projects/{id}/revoke-access/{userId}           â”‚     â”‚
â”‚  â”‚ â€¢ Middleware: CheckProjectAccess                                  â”‚     â”‚
â”‚  â”‚ â€¢ UI: Projects section in Company Dashboard                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATABASE SCHEMA                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚  â”‚     users        â”‚                                                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                      â”‚
â”‚  â”‚ id               â”‚                                                      â”‚
â”‚  â”‚ email            â”‚                                                      â”‚
â”‚  â”‚ password         â”‚                                                      â”‚
â”‚  â”‚ first_name       â”‚                                                      â”‚
â”‚  â”‚ last_name        â”‚                                                      â”‚
â”‚  â”‚ role             â”‚ (super_admin, admin, user)                          â”‚
â”‚  â”‚ company_name     â”‚ (nullable, unique)                                  â”‚
â”‚  â”‚ subdomain        â”‚ (nullable, unique)                                  â”‚
â”‚  â”‚ is_metatech_emp  â”‚ (boolean)                                           â”‚
â”‚  â”‚ status           â”‚ (active, blocked, suspended)                        â”‚
â”‚  â”‚ status_reason    â”‚ (nullable)                                          â”‚
â”‚  â”‚ blocked_at       â”‚ (nullable)                                          â”‚
â”‚  â”‚ blocked_by       â”‚ (FK â†’ users.id)                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚        â”‚                  â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚  â”‚ companies  â”‚    â”‚ staff_invitationsâ”‚                                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚
â”‚  â”‚ id         â”‚    â”‚ id              â”‚                                     â”‚
â”‚  â”‚ company_   â”‚    â”‚ company_id (FK) â”‚                                     â”‚
â”‚  â”‚   name     â”‚    â”‚ invited_by (FK) â”‚                                     â”‚
â”‚  â”‚ subdomain  â”‚    â”‚ email           â”‚                                     â”‚
â”‚  â”‚ user_id    â”‚â—„â”€â”€â”€â”¤ token           â”‚                                     â”‚
â”‚  â”‚ status     â”‚    â”‚ role            â”‚                                     â”‚
â”‚  â”‚ status_    â”‚    â”‚ status          â”‚                                     â”‚
â”‚  â”‚   reason   â”‚    â”‚ expires_at      â”‚                                     â”‚
â”‚  â”‚ blocked_at â”‚    â”‚ accepted_at     â”‚                                     â”‚
â”‚  â”‚ blocked_by â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                                             â”‚
â”‚  â”‚  projects  â”‚                                                             â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                             â”‚
â”‚  â”‚ id         â”‚                                                             â”‚
â”‚  â”‚ company_id â”‚ (FK â†’ companies.id)                                        â”‚
â”‚  â”‚ name       â”‚                                                             â”‚
â”‚  â”‚ descriptionâ”‚                                                             â”‚
â”‚  â”‚ status     â”‚                                                             â”‚
â”‚  â”‚ created_by â”‚ (FK â†’ users.id)                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚  â”‚  project_user   â”‚ (Pivot Table)                                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                       â”‚
â”‚  â”‚ project_id (FK) â”‚                                                       â”‚
â”‚  â”‚ user_id (FK)    â”‚                                                       â”‚
â”‚  â”‚ access_level    â”‚ (viewer, editor, admin)                              â”‚
â”‚  â”‚ granted_at      â”‚                                                       â”‚
â”‚  â”‚ granted_by (FK) â”‚                                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚  â”‚ bootstrap_states â”‚                                                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                      â”‚
â”‚  â”‚ status           â”‚ (BOOTSTRAP_PENDING, BOOTSTRAP_CONFIRMED, ACTIVE)   â”‚
â”‚  â”‚ super_admin_id   â”‚ (FK â†’ users.id)                                     â”‚
â”‚  â”‚ confirmed_at     â”‚                                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ bootstrap_audit_logs â”‚                                                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                                  â”‚
â”‚  â”‚ action               â”‚                                                  â”‚
â”‚  â”‚ result               â”‚                                                  â”‚
â”‚  â”‚ ip_address           â”‚                                                  â”‚
â”‚  â”‚ user_id              â”‚                                                  â”‚
â”‚  â”‚ request_payload      â”‚                                                  â”‚
â”‚  â”‚ error_message        â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚                                                                             â”‚
â”‚  (Spatie Permission Tables: roles, permissions, model_has_roles, etc.)     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AUTHENTICATION FLOW                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. USER VISITS LOGIN PAGE                                                 â”‚
â”‚     â†“                                                                       â”‚
â”‚  2. SUBDOMAIN DETECTED (DetectSubdomain Middleware)                        â”‚
â”‚     â†“                                                                       â”‚
â”‚  3. APPROPRIATE LOGIN PAGE SHOWN                                           â”‚
â”‚     â”œâ”€ admincrm.localhost â†’ Product Owner Login                            â”‚
â”‚     â”œâ”€ crm.localhost â†’ Internal Employee Login                             â”‚
â”‚     â””â”€ {subdomain}.localhost â†’ Company Login                               â”‚
â”‚     â†“                                                                       â”‚
â”‚  4. USER ENTERS CREDENTIALS                                                â”‚
â”‚     â†“                                                                       â”‚
â”‚  5. VERIFY USER ACCESS (VerifySubdomainAccess)                             â”‚
â”‚     â”œâ”€ Check if user can access this subdomain                             â”‚
â”‚     â””â”€ If not â†’ Show error with correct URL                                â”‚
â”‚     â†“                                                                       â”‚
â”‚  6. CHECK USER STATUS (CheckUserStatus)                                    â”‚
â”‚     â”œâ”€ If blocked/suspended â†’ Deny access                                  â”‚
â”‚     â””â”€ If active â†’ Continue                                                â”‚
â”‚     â†“                                                                       â”‚
â”‚  7. LOGIN SUCCESSFUL                                                       â”‚
â”‚     â†“                                                                       â”‚
â”‚  8. REDIRECT BASED ON USER TYPE                                            â”‚
â”‚     â”œâ”€ Product Owner â†’ /dashboard                                          â”‚
â”‚     â”œâ”€ Internal Employee â†’ /internal/dashboard                             â”‚
â”‚     â””â”€ Company Super Admin â†’ /company-dashboard                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MIDDLEWARE STACK                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. DetectSubdomain                                                         â”‚
â”‚     â””â”€ Detects subdomain from request                                      â”‚
â”‚     â””â”€ Sets subdomain in request attributes                                â”‚
â”‚                                                                             â”‚
â”‚  2. VerifySubdomainAccess                                                   â”‚
â”‚     â””â”€ Verifies user has access to current subdomain                       â”‚
â”‚     â””â”€ Redirects/errors if access denied                                   â”‚
â”‚                                                                             â”‚
â”‚  3. CheckUserStatus                                                         â”‚
â”‚     â””â”€ Checks if user/company is blocked or suspended                      â”‚
â”‚     â””â”€ Logs out and redirects if blocked                                   â”‚
â”‚                                                                             â”‚
â”‚  4. CheckRole                                                               â”‚
â”‚     â””â”€ Verifies user has required role (Spatie Permission)                 â”‚
â”‚                                                                             â”‚
â”‚  5. CheckProjectAccess                                                      â”‚
â”‚     â””â”€ Verifies user has access to specific project                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KEY SERVICES & CONTROLLERS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SERVICES:                                                                  â”‚
â”‚  â”œâ”€ BootstrapService          â†’ Bootstrap operations                       â”‚
â”‚  â”œâ”€ CompanyService            â†’ Company management                         â”‚
â”‚  â”œâ”€ CompanyContextService     â†’ Subdomain & context detection              â”‚
â”‚  â”œâ”€ InternalEmployeeService   â†’ Internal employee management               â”‚
â”‚  â”œâ”€ UserManagementService     â†’ Block/unblock operations                   â”‚
â”‚  â”œâ”€ StaffInvitationService    â†’ Staff invitation flow                      â”‚
â”‚  â””â”€ ProjectAccessService      â†’ Project access management                  â”‚
â”‚                                                                             â”‚
â”‚  CONTROLLERS:                                                               â”‚
â”‚  â”œâ”€ BootstrapController (API) â†’ Bootstrap endpoints                        â”‚
â”‚  â”œâ”€ AuthController (API)      â†’ Authentication                             â”‚
â”‚  â”œâ”€ CompanyController (API)   â†’ Company CRUD                               â”‚
â”‚  â”œâ”€ InternalEmployeeControllerâ†’ Internal employee CRUD                     â”‚
â”‚  â”œâ”€ UserManagementController  â†’ Block/unblock APIs                         â”‚
â”‚  â”œâ”€ StaffInvitationController â†’ Staff invitation APIs                      â”‚
â”‚  â”œâ”€ ProjectController         â†’ Project CRUD                               â”‚
â”‚  â”œâ”€ ProjectAccessController   â†’ Project access APIs                        â”‚
â”‚  â”œâ”€ BootstrapViewController   â†’ Bootstrap UI pages                         â”‚
â”‚  â”œâ”€ WebLoginController        â†’ Web authentication                         â”‚
â”‚  â”œâ”€ CompanyDashboardControllerâ†’ Company dashboard                          â”‚
â”‚  â””â”€ InternalDashboardControllerâ†’ Internal dashboard                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ACCESS MATRIX                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Feature            â”‚ Product Owner â”‚ Internal â”‚ Company SA â”‚ Staff        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Manage Companies   â”‚      âœ…       â”‚    âŒ     â”‚     âŒ      â”‚     âŒ       â”‚
â”‚  Block/Unblock      â”‚      âœ…       â”‚    âŒ     â”‚     âŒ      â”‚     âŒ       â”‚
â”‚  Create Staff       â”‚      âœ…       â”‚    âŒ     â”‚     âœ…      â”‚     âŒ       â”‚
â”‚  Invite Staff       â”‚      âŒ       â”‚    âŒ     â”‚     âœ…      â”‚     âŒ       â”‚
â”‚  Create Projects    â”‚      âŒ       â”‚    âŒ     â”‚     âœ…      â”‚     âŒ       â”‚
â”‚  View Projects      â”‚      âŒ       â”‚    âŒ     â”‚     âœ…      â”‚   âœ…*        â”‚
â”‚  Manage Projects    â”‚      âŒ       â”‚    âŒ     â”‚     âœ…      â”‚   âœ…*        â”‚
â”‚  Grant Project Accessâ”‚     âŒ       â”‚    âŒ     â”‚     âœ…      â”‚   âœ…*        â”‚
â”‚                                                                             â”‚
â”‚  * = Only projects they have access to                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMPLETE API ENDPOINTS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  BOOTSTRAP:                                                                 â”‚
â”‚  â€¢ GET  /api/v1/bootstrap/status                                           â”‚
â”‚  â€¢ POST /api/v1/bootstrap/create                                           â”‚
â”‚  â€¢ POST /api/v1/bootstrap/confirm                                          â”‚
â”‚  â€¢ GET  /api/v1/bootstrap/audit                                            â”‚
â”‚                                                                             â”‚
â”‚  AUTH:                                                                      â”‚
â”‚  â€¢ POST /api/v1/auth/login                                                 â”‚
â”‚                                                                             â”‚
â”‚  COMPANY (Product Owner only):                                             â”‚
â”‚  â€¢ GET  /api/v1/company                                                    â”‚
â”‚  â€¢ GET  /api/v1/company/stats                                              â”‚
â”‚  â€¢ GET  /api/v1/company/{id}                                               â”‚
â”‚  â€¢ POST /api/v1/company/create                                             â”‚
â”‚  â€¢ PUT  /api/v1/company/{id}/subdomain                                     â”‚
â”‚                                                                             â”‚
â”‚  INTERNAL EMPLOYEE (Product Owner only):                                   â”‚
â”‚  â€¢ GET  /api/v1/internal-employee                                          â”‚
â”‚  â€¢ POST /api/v1/internal-employee/create                                   â”‚
â”‚                                                                             â”‚
â”‚  USER MANAGEMENT (Product Owner only):                                     â”‚
â”‚  â€¢ POST /api/v1/user-management/users/{id}/block                           â”‚
â”‚  â€¢ POST /api/v1/user-management/users/{id}/unblock                         â”‚
â”‚  â€¢ POST /api/v1/user-management/companies/{id}/block                       â”‚
â”‚  â€¢ POST /api/v1/user-management/companies/{id}/unblock                     â”‚
â”‚                                                                             â”‚
â”‚  STAFF INVITATIONS (Company Super Admin only):                             â”‚
â”‚  â€¢ POST   /api/v1/staff/invite                                             â”‚
â”‚  â€¢ GET    /api/v1/staff/invitations                                        â”‚
â”‚  â€¢ POST   /api/v1/staff/invitations/{token}/accept                         â”‚
â”‚  â€¢ DELETE /api/v1/staff/invitations/{id}                                   â”‚
â”‚                                                                             â”‚
â”‚  PROJECTS (Company Super Admin & Staff):                                   â”‚
â”‚  â€¢ GET    /api/v1/projects                                                 â”‚
â”‚  â€¢ POST   /api/v1/projects                                                 â”‚
â”‚  â€¢ GET    /api/v1/projects/{id}                                            â”‚
â”‚  â€¢ PUT    /api/v1/projects/{id}                                            â”‚
â”‚  â€¢ POST   /api/v1/projects/{id}/grant-access                               â”‚
â”‚  â€¢ DELETE /api/v1/projects/{id}/revoke-access/{userId}                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            IMPLEMENTATION STATUS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âœ… Phase 1: Block/Unblock System          â†’ COMPLETE                      â”‚
â”‚  âœ… Phase 2: Role-Based Access Control     â†’ COMPLETE                      â”‚
â”‚  âœ… Phase 3: Staff Invitation System       â†’ COMPLETE                      â”‚
â”‚  âœ… Phase 4: Project-Based Access Control  â†’ COMPLETE                      â”‚
â”‚                                                                             â”‚
â”‚  âœ… Multi-Tenant Architecture              â†’ COMPLETE                      â”‚
â”‚  âœ… Authentication & Authorization         â†’ COMPLETE                      â”‚
â”‚  âœ… Product Owner Dashboard                â†’ COMPLETE                      â”‚
â”‚  âœ… Company Dashboard                      â†’ COMPLETE                      â”‚
â”‚  âœ… Internal Dashboard                     â†’ COMPLETE                      â”‚
â”‚  âœ… Email System (Invitations)             â†’ COMPLETE                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

## ğŸ¯ Summary

This diagram shows the complete multi-tenant SaaS CRM system with:

1. **4 User Types** with distinct access levels
2. **3 Separate Dashboards** for different user roles
3. **4 Complete Phases** of features implemented
4. **Complete API** with 30+ endpoints
5. **Robust Middleware** for access control
6. **Database Schema** with all relationships
7. **Email System** for staff invitations
8. **Project-Based Access Control** with granular permissions

All core features are implemented and ready for use! ğŸš€

